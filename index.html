<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Pulse Dash</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
 margin:0;
 background:black;
 display:flex;
 justify-content:center;
 align-items:center;
 height:100vh;
 color:white;
 font-family:Arial;
}
#game{
 width:700px;
 height:320px;
 border:4px solid cyan;
 box-shadow:0 0 20px cyan;
 position:relative;
 overflow:hidden;
}
#ground{
 position:absolute;
 bottom:0;
 width:100%;
 height:40px;
 background:#222;
}
.player{
 position:absolute;
 left:120px;
 bottom:40px;
 width:30px;
 height:30px;
}
.skin1{background:cyan}
.skin2{background:lime;border-radius:50%}
.skin3{background:magenta;transform:rotate(45deg)}
.skin4{background:gold;box-shadow:0 0 15px gold}
.spike{
 position:absolute;
 bottom:40px;
 width:30px;
 height:30px;
 background:red;
 clip-path:polygon(50% 0,0 100%,100% 100%);
}
#menu,#shop{
 position:absolute;
 inset:0;
 background:rgba(0,0,0,.9);
 display:flex;
 flex-direction:column;
 justify-content:center;
 align-items:center;
 gap:15px;
 z-index:10;
}
button{
 padding:10px 25px;
 font-size:18px;
 cursor:pointer;
}
#hud{
 position:absolute;
 top:5px;
 left:5px;
 font-size:14px;
}
</style>
</head>
<body>

<div id="game">
 <div id="menu">
  <h2>PULSE DASH</h2>
  <button id="btnStart">‚ñ∂ Ba≈üla</button>
  <button id="btnShop">üõç Skin Market</button>
 </div>

 <div id="shop" style="display:none">
  <h3>SKIN MARKET</h3>
  <button onclick="buy('skin1')">Skin 1 ‚úÖ</button>
  <button onclick="buy('skin2')">Skin 2 ‚úÖ</button>
  <button onclick="buy('skin3')">Skin 3 (20 skor)</button>
  <button onclick="buy('skin4')">Skin 4 (100 skor)</button>
  <button onclick="closeShop()">‚¨Ö Geri</button>
 </div>

 <div id="hud"></div>
 <div id="ground"></div>
</div>

<script>
const game=document.getElementById("game");
const menu=document.getElementById("menu");
const shop=document.getElementById("shop");
const hud=document.getElementById("hud");

let score=Number(localStorage.score||0);
let owned=JSON.parse(localStorage.owned||'["skin1","skin2"]');
let skin=localStorage.skin||"skin1";

const player=document.createElement("div");
player.className="player "+skin;
game.appendChild(player);

document.getElementById("btnStart").onclick=()=>{
 menu.style.display="none";
 started=true;
};

document.getElementById("btnShop").onclick=()=>{
 menu.style.display="none";
 shop.style.display="flex";
};

function closeShop(){
 shop.style.display="none";
 menu.style.display="flex";
}

function buy(s){
 if(!owned.includes(s)){
  if(s==="skin3" && score<20){alert("20 skor gerek");return;}
  if(s==="skin4" && score<100){alert("100 skor gerek");return;}
  owned.push(s);
  localStorage.owned=JSON.stringify(owned);
  alert("‚úÖ Skin a√ßƒ±ldƒ±");
 }
 skin=s;
 localStorage.skin=s;
 player.className="player "+s;
}

let y=40,vy=0;
let jumping=false,canDouble=false;
let gravity=0.7;
let started=false;
let spikes=[];
let t=0;

function jump(){
 if(!started) return;
 if(!jumping){
  vy=12;jumping=true;canDouble=true;
 }else if(canDouble){
  vy=12;canDouble=false;
 }
}

document.addEventListener("keydown",e=>{
 if(e.key===" "||e.key==="w") jump();
});
game.addEventListener("click",jump);

function spawn(){
 const s=document.createElement("div");
 s.className="spike";
 s.x=700;
 s.style.left=s.x+"px";
 game.appendChild(s);
 spikes.push(s);
}

function loop(){
 if(started){
  vy-=gravity;
  y+=vy;
  if(y<=40){y=40;vy=0;jumping=false;canDouble=false}
  player.style.bottom=y+"px";

  t++; if(t>90){spawn();t=0}

  spikes.forEach((s,i)=>{
   s.x-=6;
   s.style.left=s.x+"px";
   let pr=player.getBoundingClientRect();
   let sr=s.getBoundingClientRect();
   if(!(pr.right<sr.left||pr.left>sr.right||pr.bottom<sr.top)){
    alert("üíÄ GAME OVER");
    location.reload();
   }
   if(s.x<-40){
    s.remove();
    spikes.splice(i,1);
    score++;
   }
  });

  hud.textContent="Skor: "+score;
  localStorage.score=score;
 }
 requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
