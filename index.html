<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pulse Dash</title>

<style>
:root{--neon:cyan}
body{
 margin:0;
 background:#000;
 display:flex;
 justify-content:center;
 align-items:center;
 height:100vh;
 color:white;
 font-family:Arial;
}
#game{
 position:relative;
 width:800px;
 height:360px;
 border:4px solid var(--neon);
 box-shadow:0 0 30px var(--neon);
 overflow:hidden;
}
#ground{
 position:absolute;
 bottom:0;
 width:100%;
 height:50px;
 background:#111;
}
.player{
 position:absolute;
 left:120px;
 bottom:50px;
 width:30px;
 height:30px;
 background:cyan;
}
.spike{
 position:absolute;
 bottom:50px;
 width:30px;
 height:30px;
 background:red;
 clip-path:polygon(50% 0,0 100%,100% 100%);
}
#menu{
 position:absolute;
 inset:0;
 background:rgba(0,0,0,.85);
 display:flex;
 flex-direction:column;
 justify-content:center;
 align-items:center;
 gap:20px;
 z-index:10;
}
button{
 padding:12px 30px;
 font-size:20px;
 cursor:pointer;
}
#hud{
 position:absolute;
 top:10px;
 left:10px;
 font-size:16px;
}
</style>
</head>

<body>
<div id="game">
 <div id="menu">
  <h1>PULSE DASH</h1>
  <button id="startBtn">‚ñ∂ Ba≈üla</button>
 </div>
 <div id="hud">Skor: 0</div>
 <div id="ground"></div>
</div>

<script>
// ===== SESLER (GARANTƒ∞ √áALI≈ûIR) =====
const music = new Audio("music.mp3");
music.loop = true;
music.volume = 0.4;

const jumpBase = new Audio("jump.wav");
jumpBase.volume = 0.8;
function playJump(){
 const s = jumpBase.cloneNode();
 s.play().catch(()=>{});
}

// ===== OYUN =====
const game = document.getElementById("game");
const menu = document.getElementById("menu");
const hud  = document.getElementById("hud");

let started=false;
let y=50, vy=0;
let jumping=false, canDouble=false;
const gravity=0.7;
let speed=6;
let timer=0;
let score=Number(localStorage.score||0);
let spikes=[];

const player=document.createElement("div");
player.className="player";
game.appendChild(player);

// ===== BA≈ûLAT =====
document.getElementById("startBtn").onclick=()=>{
 menu.style.display="none";
 started=true;
 music.play().catch(()=>{});
};

// ===== INPUT (TU≈ûLAR √áALI≈ûIR) =====
function jump(){
 if(!started) return;

 playJump();

 if(!jumping){
  vy=12;
  jumping=true;
  canDouble=true;
 }else if(canDouble){
  vy=12;
  canDouble=false;
 }
}

document.addEventListener("keydown",e=>{
 if(e.code==="Space"||e.key==="w"||e.key==="W") jump();
});
game.addEventListener("touchstart",jump);

// ===== SPIKE =====
function spawnSpike(){
 const s=document.createElement("div");
 s.className="spike";
 s.x=820;
 s.style.left=s.x+"px";
 game.appendChild(s);
 spikes.push(s);
}

// ===== LOOP =====
function loop(){
 if(started){
  vy -= gravity;
  y += vy;
  if(y<=50){y=50;vy=0;jumping=false;canDouble=false;}
  player.style.bottom=y+"px";

  timer++;
  if(timer>90){spawnSpike();timer=0;}

  spikes.forEach((s,i)=>{
   s.x -= speed;
   s.style.left=s.x+"px";

   const pr=player.getBoundingClientRect();
   const sr=s.getBoundingClientRect();
   if(!(pr.right<sr.left||pr.left>sr.right||pr.bottom<sr.top)){
    alert("üíÄ GAME OVER");
    location.reload();
   }
   if(s.x<-50){
    s.remove();
    spikes.splice(i,1);
    score++;
   }
  });

  hud.textContent="Skor: "+score;
  localStorage.score=score;
 }
 requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
